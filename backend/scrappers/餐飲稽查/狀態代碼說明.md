# 餐飲業者稽查狀態代碼說明

## 狀態代碼定義

根據臺北市政府衛生局網站，稽查結果狀態代碼如下：

| 代碼 | 說明 | 意義 |
|-----|------|------|
| **A1** | 合格 | 首次稽查即符合規定 ✅ |
| **A2** | 複查合格 | 初次稽查不合格，經複查後已改善合格 ✅ |
| **A3** | 輔導改善 | 缺失較輕微，已給予輔導 ⚠️ |
| **B1** | 限期改善 | 有缺失，要求限期內改善 ⚠️ |
| **B2** | 複查不合格 | 複查仍不合格 ❌ |

## 資料統計

從抓取的 56,199 筆資料中：

```
合格 (A1)：      29,375 筆 (52.3%)
複查合格 (A2)：  23,096 筆 (41.1%)
輔導改善 (A3)：   2,564 筆 (4.6%)
限期改善 (B1)：   1,112 筆 (2.0%)
複查不合格 (B2)：    52 筆 (0.1%)
```

## 關於稽查日期

### 為什麼沒有日期？

原始網頁列表中**不包含稽查日期**，日期資訊只在每個業者的**詳細頁面**中。

### 如何抓取日期？

要取得稽查日期，需要：

1. 對每一筆業者資料
2. 訪問其詳細頁面（例如：`DetailFood.aspx?rid=A-151191002-00002-9`）
3. 從頁面中解析日期

**問題：** 56,199 筆資料 = 需要發送 56,199 次網頁請求！

### 解決方案

我已經提供兩個版本的程式：

#### 1. 快速版（不含日期）- `scrape_food_data.py`
```bash
python3 scrape_food_data.py
```
- 執行時間：約 10 秒
- 資料筆數：56,199 筆
- 包含：名稱、地址、電話、登錄字號、狀態、座標
- ❌ 不包含：稽查日期

#### 2. 完整版（含日期）- `scrape_with_dates.py`
```bash
python3 scrape_with_dates.py
```
- 執行時間：約 30-60 秒（僅抓 50 筆）
- 資料筆數：50 筆（示例）
- ✅ 包含：所有欄位 + 稽查日期

### 建議

**方案 A：** 如果不需要日期，使用快速版即可

**方案 B：** 如果需要特定業者的日期，可以：
1. 先用快速版抓取所有資料
2. 篩選出需要的業者
3. 針對這些業者單獨查詢日期

**方案 C：** 如果需要所有業者的日期：
- 需要約 5-10 小時（56,199 次請求）
- 建議分批處理
- 注意避免對伺服器造成過大負擔

## 範例資料

### 洛碁大飯店南港館
```
名稱：洛碁大飯店南港館
地址：臺北市南港區忠孝東路7段528號8樓
電話：02-27893009
登錄字號：A-151191002-00002-9
狀態：合格 (A1)
日期：2025.11.06  ← 需要訪問詳細頁面才能取得
座標：(25.05243, 121.6113669)
```
